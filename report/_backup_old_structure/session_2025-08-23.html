
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tideWise 세션 리포트 - 2025-08-23</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 30px; }
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .summary-card { background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center; }
        .positive { color: #28a745; }
        .negative { color: #dc3545; }
        .chart-container { margin: 20px 0; }
        .trades-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .trades-table th, .trades-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .trades-table th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>tideWise 거래 세션 리포트</h1>
            <h2>2025-08-23</h2>
        </div>
        
        <div class="summary-grid">
            <div class="summary-card">
                <h3>총 거래 수</h3>
                <div style="font-size: 24px; font-weight: bold;">15</div>
            </div>
            <div class="summary-card">
                <h3>총 손익</h3>
                <div style="font-size: 24px; font-weight: bold;" class="negative">
                    -46,112원
                </div>
            </div>
            <div class="summary-card">
                <h3>승률</h3>
                <div style="font-size: 24px; font-weight: bold;">26.7%</div>
            </div>
            <div class="summary-card">
                <h3>최대 수익</h3>
                <div style="font-size: 24px; font-weight: bold;" class="positive">18,957원</div>
            </div>
            <div class="summary-card">
                <h3>최대 손실</h3>
                <div style="font-size: 24px; font-weight: bold;" class="negative">-27,283원</div>
            </div>
            <div class="summary-card">
                <h3>수수료</h3>
                <div style="font-size: 24px; font-weight: bold;">14,910원</div>
            </div>
        </div>
        
        <div class="chart-container">
            <h3>일일 손익 차트</h3>
            <canvas id="pnlChart" width="800" height="300"></canvas>
        </div>
        
        <div class="chart-container">
            <h3>누적 손익 차트</h3>
            <canvas id="cumulativeChart" width="800" height="300"></canvas>
        </div>
        
        
<div class="advanced-charts">
    <h3>📊 과거 1년 데이터 기반 성과 분석</h3>
    
    <!-- 기간 선택 탭 -->
    <div class="period-tabs">
        <button class="tab-button active" onclick="showPeriod('30')">30일</button>
        <button class="tab-button" onclick="showPeriod('90')">90일</button>
        <button class="tab-button" onclick="showPeriod('365')">1년</button>
    </div>
    
    <!-- 차트 컨테이너 -->
    <div class="chart-grid">
        <!-- 누적 손익 차트 -->
        <div class="chart-box">
            <h4>누적 손익 추이</h4>
            <canvas id="cumulativeChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>최고: 2,856,597원</span>
                <span>최저: -552,643원</span>
                <span>현재: 2,629,913원</span>
            </div>
        </div>
        
        <!-- 일일 손익 차트 -->
        <div class="chart-box">
            <h4>일일 손익 분포</h4>
            <canvas id="dailyPnlChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>평균: 10,038원</span>
                <span>표준편차: 150,026원</span>
                <span>오늘: -46,112원</span>
            </div>
        </div>
        
        <!-- 승률 추이 차트 -->
        <div class="chart-box">
            <h4>승률 변화</h4>
            <canvas id="winRateChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>평균: 26.0%</span>
                <span>최고: 57.7%</span>
                <span>오늘: 26.7%</span>
            </div>
        </div>
        
        <!-- 포트폴리오 가치 차트 -->
        <div class="chart-box">
            <h4>포트폴리오 가치 변화</h4>
            <canvas id="portfolioChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>시작: 100,000,000원</span>
                <span>최고: 102,856,597원</span>
                <span>현재: 102,629,913원</span>
            </div>
        </div>
    </div>
    
    <!-- 성과 지표 테이블 -->
    <div class="performance-metrics">
        <h4>📈 핵심 성과 지표 (1년 기준)</h4>
        <table class="metrics-table">
            <tr>
                <td>총 거래일</td>
                <td>262일</td>
                <td>총 수익률</td>
                <td class="positive">2.63%</td>
            </tr>
            <tr>
                <td>승리일</td>
                <td>141일</td>
                <td>패배일</td>
                <td>121일</td>
            </tr>
            <tr>
                <td>최대 일일 수익</td>
                <td class="positive">397,803원</td>
                <td>최대 일일 손실</td>
                <td class="negative">-529,310원</td>
            </tr>
            <tr>
                <td>평균 거래량</td>
                <td>20.7건/일</td>
                <td>샤프 비율</td>
                <td>1.06</td>
            </tr>
        </table>
    </div>
</div>

<style>
.advanced-charts {
    margin: 30px 0;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
}

.period-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.tab-button {
    padding: 8px 20px;
    border: 1px solid #ddd;
    background: white;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.tab-button.active {
    background: #007bff;
    color: white;
    border-color: #007bff;
}

.chart-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 30px;
}

.chart-box {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.chart-box h4 {
    margin: 0 0 10px 0;
    color: #333;
}

.chart-stats {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    font-size: 12px;
    color: #666;
}

.performance-metrics {
    background: white;
    padding: 20px;
    border-radius: 8px;
}

.metrics-table {
    width: 100%;
    border-collapse: collapse;
}

.metrics-table td {
    padding: 10px;
    border-bottom: 1px solid #eee;
}

.metrics-table td:nth-child(even) {
    text-align: right;
    font-weight: bold;
}
</style>

<script>
// 과거 데이터
const historicalData = {"dates": ["2024-08-23", "2024-08-26", "2024-08-27", "2024-08-28", "2024-08-29", "2024-08-30", "2024-09-02", "2024-09-03", "2024-09-04", "2024-09-05", "2024-09-06", "2024-09-09", "2024-09-10", "2024-09-11", "2024-09-12", "2024-09-13", "2024-09-16", "2024-09-17", "2024-09-18", "2024-09-19", "2024-09-20", "2024-09-23", "2024-09-24", "2024-09-25", "2024-09-26", "2024-09-27", "2024-09-30", "2024-10-01", "2024-10-02", "2024-10-03", "2024-10-04", "2024-10-07", "2024-10-08", "2024-10-09", "2024-10-10", "2024-10-11", "2024-10-14", "2024-10-15", "2024-10-16", "2024-10-17", "2024-10-18", "2024-10-21", "2024-10-22", "2024-10-23", "2024-10-24", "2024-10-25", "2024-10-28", "2024-10-29", "2024-10-30", "2024-10-31", "2024-11-01", "2024-11-04", "2024-11-05", "2024-11-06", "2024-11-07", "2024-11-08", "2024-11-11", "2024-11-12", "2024-11-13", "2024-11-14", "2024-11-15", "2024-11-18", "2024-11-19", "2024-11-20", "2024-11-21", "2024-11-22", "2024-11-25", "2024-11-26", "2024-11-27", "2024-11-28", "2024-11-29", "2024-12-02", "2024-12-03", "2024-12-04", "2024-12-05", "2024-12-06", "2024-12-09", "2024-12-10", "2024-12-11", "2024-12-12", "2024-12-13", "2024-12-16", "2024-12-17", "2024-12-18", "2024-12-19", "2024-12-20", "2024-12-23", "2024-12-24", "2024-12-25", "2024-12-26", "2024-12-27", "2024-12-30", "2024-12-31", "2025-01-01", "2025-01-02", "2025-01-03", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-09", "2025-01-10", "2025-01-13", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-20", "2025-01-21", "2025-01-22", "2025-01-23", "2025-01-24", "2025-01-27", "2025-01-28", "2025-01-29", "2025-01-30", "2025-01-31", "2025-02-03", "2025-02-04", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-10", "2025-02-11", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-17", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-24", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-20", "2025-03-21", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-18", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-28", "2025-04-29", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-05", "2025-05-06", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-26", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-06-02", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-19", "2025-06-20", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-04", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-21", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-11", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-23"], "daily_pnl": [123848, 100026, -37818, 202388, 101622, -185268, 183850, 318846, -85438, -20498, -115044, -90934, 29443, 47318, -208271, 37769, 240348, 148739, 173314, -139291, -172670, -101920, 197886, 36600, 19953, -354643, 145315, -119036, 122992, 128454, 12338, -196218, 113281, -108599, 6859, -30010, -78532, -19601, -267803, -325083, 110429, 178719, 136626, 52163, -157494, -6121, -75818, 104689, -34527, -3912, 332563, -41444, -50481, -111563, -254042, 191672, -20690, -311911, -21329, 308310, 39601, -39018, 7981, 264015, -20723, -52440, 62926, -191135, 109101, -45570, 183807, 102136, -529310, -12, -9803, 40044, -207402, 66190, 113981, -178287, 9949, 36128, 79596, 112160, 28512, 397803, -34104, 36610, 225632, 218418, -42720, 67829, 10840, -11926, 389670, 34549, 93225, -97566, 29779, 24890, -78904, 101281, 120907, -475175, 118389, -238704, -22904, 61990, -72455, 165387, -113040, -100746, -386056, 166045, 310176, -40872, -71297, -223498, -19861, -160790, 16071, -73998, 76635, -93713, -31019, 160401, -95874, -187501, -378306, -26466, -147293, -106170, 91094, 57727, 102705, -217220, -149352, -56993, -18951, 142527, -18772, -72033, 70062, 173345, 151699, -1374, 48743, 197302, 317970, -1579, 168382, 119300, -222149, 100864, 54879, -39212, -21236, 143278, 7317, 69496, 55061, 150859, 128710, -227338, 150062, -50950, 2776, 102072, 123828, -107092, -56238, -49924, 75124, 156358, 46311, 105868, 249380, 71791, -41426, 108770, 73665, -126886, -65512, 86595, 120548, -95560, 1808, -130264, 28497, 228446, 240193, 50818, -101816, -357187, 49047, -120319, -76284, -118437, -175851, 24714, 150735, 190986, 16799, 65605, -184803, 121816, -2979, -27803, 20183, 64671, -252164, 35663, 245965, 140887, -6454, 38125, -120150, -187741, 57415, 62643, 205258, 206024, 268208, 132226, 149484, 3824, 95767, 24, -110461, -143507, -139962, -29360, -182534, 64289, 103991, -115314, 98142, 169444, -35174, -16575, 249682, -291417, -283816, -183417, 162035, 115218, 102431, 294194, -131116, 134426, -113753, -122035, -10139, 109244, -160901, 74771, -77201, 174363, -1346, -7809, 123035, -46112], "cumulative_pnl": [123848, 223874, 186056, 388444, 490066, 304798, 488648, 807494, 722056, 701558, 586514, 495580, 525023, 572341, 364070, 401839, 642187, 790926, 964240, 824949, 652279, 550359, 748245, 784845, 804798, 450155, 595470, 476434, 599426, 727880, 740218, 544000, 657281, 548682, 555541, 525531, 446999, 427398, 159595, -165488, -55059, 123660, 260286, 312449, 154955, 148834, 73016, 177705, 143178, 139266, 471829, 430385, 379904, 268341, 14299, 205971, 185281, -126630, -147959, 160351, 199952, 160934, 168915, 432930, 412207, 359767, 422693, 231558, 340659, 295089, 478896, 581032, 51722, 51710, 41907, 81951, -125451, -59261, 54720, -123567, -113618, -77490, 2106, 114266, 142778, 540581, 506477, 543087, 768719, 987137, 944417, 1012246, 1023086, 1011160, 1400830, 1435379, 1528604, 1431038, 1460817, 1485707, 1406803, 1508084, 1628991, 1153816, 1272205, 1033501, 1010597, 1072587, 1000132, 1165519, 1052479, 951733, 565677, 731722, 1041898, 1001026, 929729, 706231, 686370, 525580, 541651, 467653, 544288, 450575, 419556, 579957, 484083, 296582, -81724, -108190, -255483, -361653, -270559, -212832, -110127, -327347, -476699, -533692, -552643, -410116, -428888, -500921, -430859, -257514, -105815, -107189, -58446, 138856, 456826, 455247, 623629, 742929, 520780, 621644, 676523, 637311, 616075, 759353, 766670, 836166, 891227, 1042086, 1170796, 943458, 1093520, 1042570, 1045346, 1147418, 1271246, 1164154, 1107916, 1057992, 1133116, 1289474, 1335785, 1441653, 1691033, 1762824, 1721398, 1830168, 1903833, 1776947, 1711435, 1798030, 1918578, 1823018, 1824826, 1694562, 1723059, 1951505, 2191698, 2242516, 2140700, 1783513, 1832560, 1712241, 1635957, 1517520, 1341669, 1366383, 1517118, 1708104, 1724903, 1790508, 1605705, 1727521, 1724542, 1696739, 1716922, 1781593, 1529429, 1565092, 1811057, 1951944, 1945490, 1983615, 1863465, 1675724, 1733139, 1795782, 2001040, 2207064, 2475272, 2607498, 2756982, 2760806, 2856573, 2856597, 2746136, 2602629, 2462667, 2433307, 2250773, 2315062, 2419053, 2303739, 2401881, 2571325, 2536151, 2519576, 2769258, 2477841, 2194025, 2010608, 2172643, 2287861, 2390292, 2684486, 2553370, 2687796, 2574043, 2452008, 2441869, 2551113, 2390212, 2464983, 2387782, 2562145, 2560799, 2552990, 2676025, 2629913], "win_rate": [33.33333333333333, 25.0, 28.57142857142857, 30.0, 31.25, 20.0, 25.0, 41.66666666666667, 17.647058823529413, 15.789473684210526, 19.047619047619047, 25.0, 24.0, 25.0, 3.7037037037037033, 26.666666666666668, 22.727272727272727, 37.5, 55.55555555555556, 36.36363636363637, 26.666666666666668, 20.0, 40.0, 33.33333333333333, 26.666666666666668, 10.344827586206897, 20.689655172413794, 19.047619047619047, 28.57142857142857, 25.0, 26.666666666666668, 22.22222222222222, 20.0, 0.0, 33.33333333333333, 23.333333333333332, 7.6923076923076925, 18.181818181818183, 20.689655172413794, 21.428571428571427, 31.57894736842105, 33.33333333333333, 50.0, 35.714285714285715, 27.27272727272727, 26.666666666666668, 21.428571428571427, 50.0, 23.52941176470588, 26.666666666666668, 20.0, 12.5, 18.51851851851852, 38.46153846153847, 9.090909090909092, 40.0, 26.08695652173913, 33.33333333333333, 15.789473684210526, 50.0, 22.22222222222222, 17.647058823529413, 28.57142857142857, 29.166666666666668, 20.0, 18.181818181818183, 42.30769230769231, 14.814814814814813, 25.0, 21.428571428571427, 30.0, 33.33333333333333, 22.22222222222222, 21.052631578947366, 16.666666666666664, 23.076923076923077, 18.181818181818183, 30.434782608695656, 18.181818181818183, 26.08695652173913, 25.925925925925924, 28.57142857142857, 23.52941176470588, 23.809523809523807, 33.33333333333333, 46.15384615384615, 23.52941176470588, 40.74074074074074, 32.0, 43.333333333333336, 21.73913043478261, 25.0, 10.0, 23.076923076923077, 45.83333333333333, 23.52941176470588, 19.047619047619047, 6.25, 30.76923076923077, 22.22222222222222, 28.57142857142857, 24.137931034482758, 38.88888888888889, 11.538461538461538, 27.27272727272727, 21.428571428571427, 20.0, 25.0, 10.714285714285714, 20.0, 13.333333333333334, 20.689655172413794, 6.896551724137931, 40.0, 43.75, 21.428571428571427, 33.33333333333333, 43.75, 18.51851851851852, 35.0, 14.285714285714285, 21.052631578947366, 23.52941176470588, 15.384615384615385, 36.84210526315789, 14.285714285714285, 26.666666666666668, 13.333333333333334, 7.6923076923076925, 18.181818181818183, 20.0, 8.333333333333332, 28.57142857142857, 16.666666666666664, 35.294117647058826, 20.833333333333336, 26.666666666666668, 19.047619047619047, 37.5, 25.0, 19.230769230769234, 27.27272727272727, 20.689655172413794, 18.75, 25.0, 17.857142857142858, 32.0, 33.33333333333333, 33.33333333333333, 36.36363636363637, 40.909090909090914, 32.0, 20.689655172413794, 36.0, 28.000000000000004, 26.666666666666668, 18.75, 23.809523809523807, 40.74074074074074, 27.27272727272727, 25.0, 28.000000000000004, 24.137931034482758, 25.0, 23.076923076923077, 7.142857142857142, 8.333333333333332, 36.0, 25.0, 21.428571428571427, 20.0, 30.0, 29.166666666666668, 30.76923076923077, 34.78260869565217, 30.434782608695656, 37.93103448275862, 36.84210526315789, 13.333333333333334, 20.0, 39.285714285714285, 36.36363636363637, 26.666666666666668, 46.666666666666664, 25.0, 15.789473684210526, 37.5, 8.333333333333332, 25.925925925925924, 27.586206896551722, 25.0, 36.666666666666664, 9.090909090909092, 4.761904761904762, 28.57142857142857, 30.434782608695656, 16.666666666666664, 29.629629629629626, 30.76923076923077, 28.57142857142857, 25.0, 33.33333333333333, 18.75, 36.36363636363637, 40.74074074074074, 40.0, 35.714285714285715, 14.285714285714285, 27.77777777777778, 45.45454545454545, 17.391304347826086, 36.666666666666664, 34.48275862068966, 35.714285714285715, 33.33333333333333, 15.0, 27.77777777777778, 25.0, 25.0, 19.230769230769234, 38.46153846153847, 31.25, 23.333333333333332, 20.0, 34.78260869565217, 36.36363636363637, 31.818181818181817, 20.0, 33.33333333333333, 28.57142857142857, 5.555555555555555, 20.0, 7.6923076923076925, 17.857142857142858, 25.925925925925924, 23.076923076923077, 28.57142857142857, 30.0, 26.666666666666668, 23.809523809523807, 36.0, 12.5, 6.666666666666667, 16.666666666666664, 22.22222222222222, 45.45454545454545, 33.33333333333333, 57.692307692307686, 27.77777777777778, 31.25, 20.0, 20.0, 17.24137931034483, 37.5, 17.857142857142858, 50.0, 20.689655172413794, 21.428571428571427, 20.689655172413794, 20.0, 28.57142857142857, 26.666666666666668], "trade_volume": [30, 16, 21, 10, 16, 25, 12, 12, 17, 19, 21, 28, 25, 24, 27, 15, 22, 16, 18, 22, 30, 20, 10, 24, 15, 29, 29, 21, 28, 16, 15, 27, 10, 13, 12, 30, 13, 11, 29, 28, 19, 21, 14, 28, 22, 15, 28, 12, 17, 30, 15, 16, 27, 13, 11, 25, 23, 15, 19, 18, 27, 17, 14, 24, 20, 11, 26, 27, 28, 14, 30, 12, 27, 19, 24, 13, 11, 23, 22, 23, 27, 28, 17, 21, 18, 26, 17, 27, 25, 30, 23, 20, 10, 13, 24, 17, 21, 16, 13, 18, 28, 29, 18, 26, 22, 14, 10, 16, 28, 20, 15, 29, 29, 25, 16, 14, 27, 16, 27, 20, 21, 19, 17, 13, 19, 28, 30, 15, 13, 22, 10, 24, 28, 12, 17, 24, 30, 21, 16, 16, 26, 22, 29, 16, 24, 28, 25, 15, 15, 11, 22, 25, 29, 25, 25, 30, 16, 21, 27, 11, 16, 25, 29, 20, 26, 14, 12, 25, 16, 14, 20, 20, 24, 26, 23, 23, 29, 19, 15, 10, 28, 11, 15, 15, 28, 19, 16, 12, 27, 29, 28, 30, 11, 21, 21, 23, 12, 27, 26, 28, 28, 21, 16, 22, 27, 15, 14, 14, 18, 11, 23, 30, 29, 28, 15, 20, 18, 24, 12, 26, 26, 16, 30, 10, 23, 11, 22, 20, 18, 21, 18, 30, 13, 28, 27, 13, 14, 30, 15, 21, 25, 24, 15, 24, 27, 11, 18, 26, 18, 16, 20, 20, 29, 16, 28, 14, 29, 28, 29, 25, 21, 15], "portfolio_value": [100123848, 100223874, 100186056, 100388444, 100490066, 100304798, 100488648, 100807494, 100722056, 100701558, 100586514, 100495580, 100525023, 100572341, 100364070, 100401839, 100642187, 100790926, 100964240, 100824949, 100652279, 100550359, 100748245, 100784845, 100804798, 100450155, 100595470, 100476434, 100599426, 100727880, 100740218, 100544000, 100657281, 100548682, 100555541, 100525531, 100446999, 100427398, 100159595, 99834512, 99944941, 100123660, 100260286, 100312449, 100154955, 100148834, 100073016, 100177705, 100143178, 100139266, 100471829, 100430385, 100379904, 100268341, 100014299, 100205971, 100185281, 99873370, 99852041, 100160351, 100199952, 100160934, 100168915, 100432930, 100412207, 100359767, 100422693, 100231558, 100340659, 100295089, 100478896, 100581032, 100051722, 100051710, 100041907, 100081951, 99874549, 99940739, 100054720, 99876433, 99886382, 99922510, 100002106, 100114266, 100142778, 100540581, 100506477, 100543087, 100768719, 100987137, 100944417, 101012246, 101023086, 101011160, 101400830, 101435379, 101528604, 101431038, 101460817, 101485707, 101406803, 101508084, 101628991, 101153816, 101272205, 101033501, 101010597, 101072587, 101000132, 101165519, 101052479, 100951733, 100565677, 100731722, 101041898, 101001026, 100929729, 100706231, 100686370, 100525580, 100541651, 100467653, 100544288, 100450575, 100419556, 100579957, 100484083, 100296582, 99918276, 99891810, 99744517, 99638347, 99729441, 99787168, 99889873, 99672653, 99523301, 99466308, 99447357, 99589884, 99571112, 99499079, 99569141, 99742486, 99894185, 99892811, 99941554, 100138856, 100456826, 100455247, 100623629, 100742929, 100520780, 100621644, 100676523, 100637311, 100616075, 100759353, 100766670, 100836166, 100891227, 101042086, 101170796, 100943458, 101093520, 101042570, 101045346, 101147418, 101271246, 101164154, 101107916, 101057992, 101133116, 101289474, 101335785, 101441653, 101691033, 101762824, 101721398, 101830168, 101903833, 101776947, 101711435, 101798030, 101918578, 101823018, 101824826, 101694562, 101723059, 101951505, 102191698, 102242516, 102140700, 101783513, 101832560, 101712241, 101635957, 101517520, 101341669, 101366383, 101517118, 101708104, 101724903, 101790508, 101605705, 101727521, 101724542, 101696739, 101716922, 101781593, 101529429, 101565092, 101811057, 101951944, 101945490, 101983615, 101863465, 101675724, 101733139, 101795782, 102001040, 102207064, 102475272, 102607498, 102756982, 102760806, 102856573, 102856597, 102746136, 102602629, 102462667, 102433307, 102250773, 102315062, 102419053, 102303739, 102401881, 102571325, 102536151, 102519576, 102769258, 102477841, 102194025, 102010608, 102172643, 102287861, 102390292, 102684486, 102553370, 102687796, 102574043, 102452008, 102441869, 102551113, 102390212, 102464983, 102387782, 102562145, 102560799, 102552990, 102676025, 102629913]};
const currentSession = {"total_profit_loss": -46112, "win_rate": 26.666666666666668, "total_trades": 15};

// 차트 그리기 함수
function drawHistoricalCharts(period) {
    const days = period === '30' ? 30 : period === '90' ? 90 : 365;
    const startIdx = Math.max(0, historicalData.dates.length - days);
    
    // 누적 손익 차트
    drawLineChart('cumulativeChart', 
        historicalData.dates.slice(startIdx),
        historicalData.cumulative_pnl.slice(startIdx),
        '#007bff');
    
    // 일일 손익 차트
    drawBarChart('dailyPnlChart',
        historicalData.dates.slice(startIdx),
        historicalData.daily_pnl.slice(startIdx));
    
    // 승률 차트
    drawLineChart('winRateChart',
        historicalData.dates.slice(startIdx),
        historicalData.win_rate.slice(startIdx),
        '#28a745');
    
    // 포트폴리오 차트
    drawLineChart('portfolioChart',
        historicalData.dates.slice(startIdx),
        historicalData.portfolio_value.slice(startIdx),
        '#6f42c1');
}

function drawLineChart(canvasId, labels, data, color) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;
    
    ctx.clearRect(0, 0, width, height);
    
    if (data.length < 2) return;
    
    const padding = 40;
    const graphWidth = width - padding * 2;
    const graphHeight = height - padding * 2;
    
    const maxVal = Math.max(...data);
    const minVal = Math.min(...data);
    const range = maxVal - minVal || 1;
    
    // 그리드 그리기
    ctx.strokeStyle = '#e0e0e0';
    ctx.lineWidth = 0.5;
    for (let i = 0; i <= 5; i++) {
        const y = padding + (graphHeight / 5) * i;
        ctx.beginPath();
        ctx.moveTo(padding, y);
        ctx.lineTo(width - padding, y);
        ctx.stroke();
    }
    
    // 데이터 라인 그리기
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    
    data.forEach((val, i) => {
        const x = padding + (i / (data.length - 1)) * graphWidth;
        const y = padding + graphHeight - ((val - minVal) / range) * graphHeight;
        
        if (i === 0) {
            ctx.moveTo(x, y);
        } else {
            ctx.lineTo(x, y);
        }
    });
    
    ctx.stroke();
    
    // 현재 값 강조
    if (data.length > 0) {
        const lastX = width - padding;
        const lastY = padding + graphHeight - ((data[data.length - 1] - minVal) / range) * graphHeight;
        
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.arc(lastX, lastY, 4, 0, 2 * Math.PI);
        ctx.fill();
    }
}

function drawBarChart(canvasId, labels, data) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;
    
    ctx.clearRect(0, 0, width, height);
    
    if (data.length === 0) return;
    
    const padding = 40;
    const graphWidth = width - padding * 2;
    const graphHeight = height - padding * 2;
    
    const maxVal = Math.max(...data.map(Math.abs));
    
    // 중심선 그리기
    ctx.strokeStyle = '#333';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(padding, height / 2);
    ctx.lineTo(width - padding, height / 2);
    ctx.stroke();
    
    // 바 그리기
    const barWidth = graphWidth / data.length;
    
    data.forEach((val, i) => {
        const x = padding + i * barWidth;
        const barHeight = (Math.abs(val) / maxVal) * (graphHeight / 2);
        const y = val >= 0 ? height / 2 - barHeight : height / 2;
        
        ctx.fillStyle = val >= 0 ? '#28a745' : '#dc3545';
        ctx.fillRect(x + 1, y, barWidth - 2, barHeight);
    });
}

function showPeriod(period) {
    // 탭 활성화 상태 변경
    document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // 차트 다시 그리기
    drawHistoricalCharts(period);
}

// 초기 차트 그리기
setTimeout(() => drawHistoricalCharts('30'), 100);
</script>
        
        
        <h3>거래 내역</h3>
        <table class="trades-table">
            <thead>
                <tr>
                    <th>시간</th>
                    <th>종목</th>
                    <th>매매</th>
                    <th>수량</th>
                    <th>가격</th>
                    <th>손익</th>
                    <th>알고리즘</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>05:10:04</td><td>068270</td><td>BUY</td><td>5</td><td>154,113</td><td class="positive">0</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>068270</td><td>SELL</td><td>8</td><td>152,300</td><td class="negative">-26,097</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>005930</td><td>SELL</td><td>5</td><td>69,907</td><td class="negative">-1,106</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>035420</td><td>BUY</td><td>8</td><td>206,085</td><td class="positive">0</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>005930</td><td>SELL</td><td>5</td><td>70,906</td><td class="negative">-6,718</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>068270</td><td>SELL</td><td>6</td><td>148,237</td><td class="negative">-27,283</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>068270</td><td>BUY</td><td>4</td><td>154,030</td><td class="positive">0</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>068270</td><td>SELL</td><td>7</td><td>154,881</td><td class="positive">2,713</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>035420</td><td>SELL</td><td>2</td><td>200,837</td><td class="negative">-8,020</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>068270</td><td>BUY</td><td>5</td><td>156,115</td><td class="positive">0</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>005930</td><td>SELL</td><td>4</td><td>68,215</td><td class="negative">-8,588</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>005930</td><td>SELL</td><td>8</td><td>71,162</td><td class="positive">3,454</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>035420</td><td>BUY</td><td>4</td><td>203,453</td><td class="positive">0</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>005930</td><td>SELL</td><td>2</td><td>75,203</td><td class="positive">6,576</td><td>Enhanced_DavidPaul_Trading</td></tr><tr><td>05:10:04</td><td>005930</td><td>SELL</td><td>7</td><td>73,419</td><td class="positive">18,957</td><td>Enhanced_DavidPaul_Trading</td></tr>
            </tbody>
        </table>
    </div>
    
    <script>
        
        // 일일 손익 차트
        const pnlCanvas = document.getElementById('pnlChart');
        const pnlCtx = pnlCanvas.getContext('2d');
        
        const labels = ['05'];
        const pnlData = [-46112];
        const cumulativeData = [-46112];
        
        // 간단한 바 차트 그리기
        function drawBarChart(ctx, data, width, height) {
            const barWidth = width / data.length;
            const maxVal = Math.max(...data.map(Math.abs));
            
            ctx.clearRect(0, 0, width, height);
            
            // 축 그리기
            ctx.strokeStyle = '#000';
            ctx.beginPath();
            ctx.moveTo(0, height/2);
            ctx.lineTo(width, height/2);
            ctx.stroke();
            
            // 바 그리기
            data.forEach((val, i) => {
                const barHeight = (Math.abs(val) / maxVal) * (height/2 - 20);
                const x = i * barWidth;
                const y = val >= 0 ? height/2 - barHeight : height/2;
                
                ctx.fillStyle = val >= 0 ? '#28a745' : '#dc3545';
                ctx.fillRect(x + 2, y, barWidth - 4, barHeight);
                
                // 레이블
                ctx.fillStyle = '#000';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(labels[i], x + barWidth/2, height - 5);
            });
        }
        
        // 라인 차트 그리기
        function drawLineChart(ctx, data, width, height) {
            const pointWidth = width / (data.length - 1);
            const maxVal = Math.max(...data);
            const minVal = Math.min(...data);
            const range = maxVal - minVal || 1;
            
            ctx.clearRect(0, 0, width, height);
            
            if (data.length < 2) return;
            
            ctx.strokeStyle = '#007bff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            data.forEach((val, i) => {
                const x = i * pointWidth;
                const y = height - ((val - minVal) / range) * (height - 40) - 20;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // 포인트 그리기
            ctx.fillStyle = '#007bff';
            data.forEach((val, i) => {
                const x = i * pointWidth;
                const y = height - ((val - minVal) / range) * (height - 40) - 20;
                ctx.beginPath();
                ctx.arc(x, y, 3, 0, 2 * Math.PI);
                ctx.fill();
            });
        }
        
        drawBarChart(pnlCtx, pnlData, 800, 300);
        
        const cumulativeCanvas = document.getElementById('cumulativeChart');
        const cumulativeCtx = cumulativeCanvas.getContext('2d');
        drawLineChart(cumulativeCtx, cumulativeData, 800, 300);
        
    </script>
</body>
</html>
        