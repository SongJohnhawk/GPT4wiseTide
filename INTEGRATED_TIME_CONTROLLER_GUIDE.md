# í†µí•© ì‹œê°„ ì œì–´ ì‹œìŠ¤í…œ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”
tideWise ìë™ë§¤ë§¤ ì‹œìŠ¤í…œì˜ í†µí•© ì‹œê°„ ì œì–´ ì‹œìŠ¤í…œì€ ëª¨ë“  ì‹œê°„ ê´€ë ¨ ê¸°ëŠ¥ì„ í•˜ë‚˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ í†µí•©í•œ ê³ ê¸‰ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‹œì¥ ì‹œê°„ ê´€ë¦¬
- **ì¥ì‹œì‘ ëŒ€ê¸°**: 09:10ê¹Œì§€ ìë™ ëŒ€ê¸°
- **ì¥ë§ˆê° ì²´í¬**: 15:30 ì‹œì¥ ë§ˆê° ê°ì§€
- **ìë™ ì¤‘ì§€**: 15:20 ìë™ ë§¤ë§¤ ì¤‘ì§€
- **íœ´ì¥ì¼ ê°ì§€**: ì£¼ë§ ë° ê³µíœ´ì¼ ìë™ ê°ì§€

### 2. ìˆœí™˜ ê°„ê²© ê´€ë¦¬
- **ê¸°ë³¸ ê°„ê²©**: 180ì´ˆ (3ë¶„)
- **ìµœì†Œ/ìµœëŒ€**: 30ì´ˆ ~ 600ì´ˆ
- **ë™ì  ì¡°ì •**: ì‹œê°„ëŒ€ë³„ ìë™ ì¡°ì •
- **ì¹´ìš´íŠ¸ë‹¤ìš´**: ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸ë‹¤ìš´ í‘œì‹œ

### 3. ì‹œê°„ëŒ€ë³„ ìë™ ì¡°ì •
- **ì•„ì¹¨ì¥ (09:00~10:00)**: ê°„ê²© 20% ì¶•ì†Œ (ë¹ ë¥¸ ì‹¤í–‰)
- **ì ì‹¬ì‹œê°„ (12:00~13:00)**: ê°„ê²© 50% í™•ëŒ€ (ëŠë¦° ì‹¤í–‰)
- **ë§ˆê°ì „ (14:30~15:20)**: ê°„ê²© 30% ì¶•ì†Œ (ë¹ ë¥¸ ì‹¤í–‰)

### 4. ì‹œì¥ ë‹¨ê³„ ì¸ì‹
- ì¥ì „ / ì•„ì¹¨ì¥ / ì ì‹¬ì‹œê°„ / ì˜¤í›„ì¥ / ë§ˆê°ì „ / ì¥ë§ˆê°ì„ë°• / ì¥ë§ˆê°

## ğŸ“ íŒŒì¼ êµ¬ì¡°
```
support/
â”œâ”€â”€ integrated_time_controller.py    # ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬
â”œâ”€â”€ integrated_time_config.json      # ì„¤ì • íŒŒì¼
â””â”€â”€ unified_cycle_manager.py        # ê¸°ì¡´ ìˆœí™˜ ê´€ë¦¬ì (í˜¸í™˜)
```

## âš™ï¸ ì„¤ì • íŒŒì¼ êµ¬ì¡°

### integrated_time_config.json
```json
{
  "time_check_enabled": true,          // ì‹œê°„ ì²´í¬ í™œì„±í™”
  "daytrading_stop_time": "14:00",     // ë‹¨íƒ€ë§¤ë§¤ ì¤‘ì§€ ì‹œê°„
  "program_shutdown_time": "14:00",    // í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œê°„
  "market_open_time": "09:10",         // ì¥ì‹œì‘ ì‹œê°„
  "auto_shutdown_enabled": true,       // ìë™ ì¢…ë£Œ í™œì„±í™”
  "holiday_check_enabled": true,       // íœ´ì¥ì¼ ì²´í¬ í™œì„±í™”
  
  "cycle_settings": {
    "default_interval": 180,           // ê¸°ë³¸ ìˆœí™˜ ê°„ê²©(ì´ˆ)
    "min_interval": 30,                // ìµœì†Œ ê°„ê²©
    "max_interval": 600,               // ìµœëŒ€ ê°„ê²©
    "countdown_enabled": true,         // ì¹´ìš´íŠ¸ë‹¤ìš´ í‘œì‹œ
    "countdown_update_interval": 10    // ì¹´ìš´íŠ¸ë‹¤ìš´ ì—…ë°ì´íŠ¸ ê°„ê²©
  },
  
  "auto_adjustment": {
    "enabled": true,                   // ìë™ ì¡°ì • í™œì„±í™”
    "morning_boost": 0.8,              // ì•„ì¹¨ì¥ ë°°ìœ¨ (80%)
    "lunch_slowdown": 1.5,             // ì ì‹¬ì‹œê°„ ë°°ìœ¨ (150%)
    "closing_boost": 0.7               // ë§ˆê°ì „ ë°°ìœ¨ (70%)
  },
  
  "market_times": {
    "market_open": "09:00",
    "market_close": "15:30",
    "auto_stop": "15:20",
    "pre_market_end": "09:05",
    "lunch_start": "12:00",
    "lunch_end": "13:00"
  }
}
```

## ğŸ”§ ì‚¬ìš© ë°©ë²•

### ê¸°ë³¸ ì‚¬ìš©ë²•
```python
from support.integrated_time_controller import get_integrated_controller

# ì»¨íŠ¸ë¡¤ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸° (ì‹±ê¸€í†¤)
controller = get_integrated_controller()

# ì‹œì¥ ìƒíƒœ í™•ì¸
is_tradeable, status = controller.get_market_status()
print(f"ê±°ë˜ ê°€ëŠ¥: {is_tradeable}, ìƒíƒœ: {status}")

# ìˆœí™˜ íƒ€ì´ë¨¸ ì‹œì‘
controller.start_cycle_timer()

# ìˆœí™˜ ëŒ€ê¸° (ë¹„ë™ê¸°)
await controller.wait_for_next_cycle()

# ë‹¤ìŒ ìˆœí™˜ìœ¼ë¡œ ì§„í–‰
controller.advance_to_next_cycle()

# í†µê³„ ì •ë³´
stats = controller.get_cycle_stats()
```

### ê³ ê¸‰ ê¸°ëŠ¥
```python
# ì‹œì¥ ë‹¨ê³„ í™•ì¸
phase = controller.get_market_phase()  # "ì•„ì¹¨ì¥", "ì ì‹¬ì‹œê°„", "ì˜¤í›„ì¥" ë“±

# ì ì‹¬ì‹œê°„ ì²´í¬
if controller.is_lunch_time():
    print("ì ì‹¬ì‹œê°„ì…ë‹ˆë‹¤")

# ìˆœí™˜ ê°„ê²© ìˆ˜ë™ ë³€ê²½
controller.set_cycle_interval(120)  # 2ë¶„ìœ¼ë¡œ ë³€ê²½

# ì¹´ìš´íŠ¸ë‹¤ìš´ í‘œì‹œ
print(controller.get_countdown_display())
# ì¶œë ¥: "ë‹¤ìŒ ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰ê¹Œì§€: 2ë¶„ 30ì´ˆ [ì ì‹¬ì‹œê°„]"

# íŠ¹ì • ì´ë²¤íŠ¸ê¹Œì§€ ë‚¨ì€ ì‹œê°„
seconds = controller.get_time_until_market_event("close")
print(f"ì¥ë§ˆê°ê¹Œì§€: {controller.format_time_until(seconds)}")
```

### production_auto_trader.py í†µí•© ì˜ˆì œ
```python
async def main_trading_loop():
    controller = get_integrated_controller()
    controller.start_cycle_timer()
    
    while True:
        # ì‹œì¥ ìƒíƒœ ì²´í¬
        is_tradeable, status = controller.get_market_status()
        if not is_tradeable:
            print(f"ê±°ë˜ ë¶ˆê°€: {status}")
            break
        
        # ìë™ ì¤‘ì§€ ì²´í¬
        if controller.should_auto_stop():
            print("ìë™ ì¤‘ì§€ ì‹œê°„ ë„ë‹¬")
            break
        
        # ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰
        execute_trading_algorithm()
        
        # ë‹¤ìŒ ìˆœí™˜ê¹Œì§€ ëŒ€ê¸°
        success = await controller.wait_for_next_cycle()
        if not success:
            break
        
        # ë‹¤ìŒ ìˆœí™˜ ì¤€ë¹„
        controller.advance_to_next_cycle()
```

## ğŸ“Š ì‹œê°„ëŒ€ë³„ ë™ì‘

### ì‹œê°„ëŒ€ë³„ ìˆœí™˜ ê°„ê²©
| ì‹œê°„ëŒ€ | ê¸°ë³¸ ê°„ê²© | ì¡°ì • ë°°ìœ¨ | ì‹¤ì œ ê°„ê²© |
|--------|----------|-----------|-----------|
| 09:00~10:00 (ì•„ì¹¨ì¥) | 180ì´ˆ | 0.8 | 144ì´ˆ |
| 10:00~12:00 (ì˜¤ì „) | 180ì´ˆ | 1.0 | 180ì´ˆ |
| 12:00~13:00 (ì ì‹¬) | 180ì´ˆ | 1.5 | 270ì´ˆ |
| 13:00~14:30 (ì˜¤í›„) | 180ì´ˆ | 1.0 | 180ì´ˆ |
| 14:30~15:20 (ë§ˆê°ì „) | 180ì´ˆ | 0.7 | 126ì´ˆ |

### ìë™ ë™ì‘
- **09:10 ì´ì „**: ì¥ì‹œì‘ ëŒ€ê¸°
- **09:10**: ìë™ë§¤ë§¤ ì‹œì‘
- **12:00~13:00**: ìˆœí™˜ ê°„ê²© ìë™ í™•ëŒ€
- **14:00**: ë‹¨íƒ€ë§¤ë§¤ ìë™ ì¤‘ì§€
- **14:00**: í”„ë¡œê·¸ë¨ ìë™ ì¢…ë£Œ (ì„¤ì •ì‹œ)
- **15:20**: ëª¨ë“  ë§¤ë§¤ ìë™ ì¤‘ì§€
- **15:30**: ì¥ë§ˆê°

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
python test_time_controller.py
```

### í…ŒìŠ¤íŠ¸ í•­ëª©
1. ì‹œê°„ ì²´í¬ í™œì„±í™” ìƒíƒœ
2. íœ´ì¥ì¼/ì£¼ë§ ì²´í¬
3. ì¥ì‹œì‘ ëŒ€ê¸° ë¡œì§
4. ë‹¨íƒ€ë§¤ë§¤ ì¤‘ì§€ ì‹œê°„
5. í”„ë¡œê·¸ë¨ ìë™ ì¢…ë£Œ
6. ìƒíƒœ ë©”ì‹œì§€
7. ê±°ë˜ ì‹œê°„ ê²€ì¦
8. ìˆœí™˜ ê´€ë¦¬ ê¸°ëŠ¥
9. ì‹œì¥ ë‹¨ê³„ í™•ì¸
10. ì‹œê°„ëŒ€ë³„ ìë™ ì¡°ì •
11. ìˆœí™˜ ëŒ€ê¸° ì‚¬ì´í´

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ì‹œê°„ ì„¤ì •**: ì‹œìŠ¤í…œ ì‹œê°„ì´ ì •í™•í•´ì•¼ í•©ë‹ˆë‹¤
2. **ìµœì†Œ ê°„ê²©**: ìˆœí™˜ ê°„ê²©ì€ 30ì´ˆ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤
3. **ì‹±ê¸€í†¤ íŒ¨í„´**: `get_integrated_controller()` ì‚¬ìš© ê¶Œì¥
4. **ë¹„ë™ê¸° ì²˜ë¦¬**: `wait_for_next_cycle()`ì€ async í•¨ìˆ˜ì…ë‹ˆë‹¤

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

### ê¸°ì¡´ ì‹œìŠ¤í…œì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜
```python
# ê¸°ì¡´ ì½”ë“œ
from support.unified_cycle_manager import UnifiedCycleManager
from support.market_time_manager import MarketTimeManager

cycle_manager = UnifiedCycleManager()
time_manager = MarketTimeManager()

# ìƒˆ ì½”ë“œ
from support.integrated_time_controller import get_integrated_controller

controller = get_integrated_controller()
# ëª¨ë“  ê¸°ëŠ¥ì´ í†µí•©ë¨
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

- **ë©”ëª¨ë¦¬ íš¨ìœ¨**: ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ë§Œ ìœ ì§€
- **CPU íš¨ìœ¨**: 1ì´ˆ ê°„ê²© ì²´í¬ë¡œ CPU ì‚¬ìš© ìµœì†Œí™”
- **ë™ì  ì¡°ì •**: ì‹œì¥ ìƒí™©ì— ë”°ë¥¸ ìë™ ê°„ê²© ì¡°ì •
- **ì¹´ìš´íŠ¸ë‹¤ìš´ ìµœì í™”**: 10ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸ë¡œ ì¶œë ¥ ìµœì†Œí™”

## ğŸš¦ ìƒíƒœ ì½”ë“œ

- **SUCCESS**: ì •ìƒ ë™ì‘
- **WARNING**: ê²½ê³  (ê³„ì† ë™ì‘)
- **ERROR**: ì˜¤ë¥˜ (ì¤‘ë‹¨ í•„ìš”)
- **INFO**: ì •ë³´ í‘œì‹œ

## ğŸ“ ì§€ì›

ë¬¸ì œ ë°œìƒì‹œ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. `integrated_time_config.json` ì„¤ì • í™•ì¸
2. ì‹œìŠ¤í…œ ì‹œê°„ ì •í™•ì„± í™•ì¸
3. ë¡œê·¸ íŒŒì¼ í™•ì¸
4. `test_time_controller.py` ì‹¤í–‰í•˜ì—¬ ì§„ë‹¨