
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tideWise 세션 리포트 - 2025-08-23</title>
    <link rel="stylesheet" href="../support/Report4Css_new.css">
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
    <script src="../support/enhanced_charts.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>tideWise 거래 세션 리포트</h1>
            <h2>2025-08-23</h2>
        </div>
        
        <div class="summary-grid">
            <div class="summary-card">
                <h3>총 거래 수</h3>
                <div class="value">10</div>
            </div>
            <div class="summary-card">
                <h3>총 손익</h3>
                <div class="value positive">+198,235원</div>
            </div>
            <div class="summary-card">
                <h3>승률</h3>
                <div class="value">50.0%</div>
            </div>
            <div class="summary-card">
                <h3>최대 수익</h3>
                <div class="value positive">+69,704원</div>
            </div>
            <div class="summary-card">
                <h3>최대 손실</h3>
                <div class="value">0원</div>
            </div>
            <div class="summary-card">
                <h3>수수료</h3>
                <div class="value">68,695원</div>
            </div>
        </div>
        
        <div class="chart-container">
            <h3>실시간 5분봉 차트 + 투자자별 매매량</h3>
            <div id="sessionPnlChart" style="height: 400px; width: 100%;"></div>
        </div>
        
        <div class="chart-container">
            <h3>거래량 차트</h3>
            <div id="sessionCumulativeChart" style="height: 300px; width: 100%;"></div>
        </div>
        
        
<div class="advanced-charts">
    <h3>📊 과거 1년 데이터 기반 성과 분석</h3>
    
    <!-- 기간 선택 탭 -->
    <div class="period-tabs">
        <button class="tab-button active" onclick="showPeriod('30')">30일</button>
        <button class="tab-button" onclick="showPeriod('90')">90일</button>
        <button class="tab-button" onclick="showPeriod('365')">1년</button>
    </div>
    
    <!-- 차트 컨테이너 -->
    <div class="chart-grid">
        <!-- 누적 손익 차트 -->
        <div class="chart-box">
            <h4>누적 손익 추이</h4>
            <canvas id="historicalCumulativeChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>최고: 198,235원</span>
                <span>최저: 198,235원</span>
                <span>현재: 198,235원</span>
            </div>
        </div>
        
        <!-- 일일 손익 차트 -->
        <div class="chart-box">
            <h4>일일 손익 분포</h4>
            <canvas id="dailyPnlChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>평균: 198,235원</span>
                <span>표준편차: 0원</span>
                <span>오늘: 198,235원</span>
            </div>
        </div>
        
        <!-- 승률 추이 차트 -->
        <div class="chart-box">
            <h4>승률 변화</h4>
            <canvas id="winRateChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>평균: 50.0%</span>
                <span>최고: 50.0%</span>
                <span>오늘: 50.0%</span>
            </div>
        </div>
        
        <!-- 포트폴리오 가치 차트 -->
        <div class="chart-box">
            <h4>포트폴리오 가치 변화</h4>
            <canvas id="portfolioChart" width="500" height="250"></canvas>
            <div class="chart-stats">
                <span>시작: 100,000,000원</span>
                <span>최고: 100,198,235원</span>
                <span>현재: 100,198,235원</span>
            </div>
        </div>
    </div>
    
    <!-- 성과 지표 테이블 -->
    <div class="performance-metrics">
        <h4>📈 핵심 성과 지표 (1년 기준)</h4>
        <table class="metrics-table">
            <tr>
                <td>총 거래일</td>
                <td>1일</td>
                <td>총 수익률</td>
                <td class="positive">0.20%</td>
            </tr>
            <tr>
                <td>승리일</td>
                <td>1일</td>
                <td>패배일</td>
                <td>0일</td>
            </tr>
            <tr>
                <td>최대 일일 수익</td>
                <td class="positive">198,235원</td>
                <td>최대 일일 손실</td>
                <td class="negative">198,235원</td>
            </tr>
            <tr>
                <td>평균 거래량</td>
                <td>10.0건/일</td>
                <td>샤프 비율</td>
                <td>0.00</td>
            </tr>
        </table>
    </div>
</div>

<!-- 거래 내역 테이블 -->
<div class="trades-section">
    <h3>거래 내역</h3>
    <table class="trades-table">
        <thead>
            <tr>
                <th>시간</th>
                <th>종목</th>
                <th>구분</th>
                <th>수량</th>
                <th>가격</th>
                <th>금액</th>
                <th>수수료</th>
                <th>손익</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>05:53:22</td>
                <td>삼성전자 (005930)</td>
                <td class="trade-buy">매수</td>
                <td>100주</td>
                <td>71,400원</td>
                <td>7,140,000원</td>
                <td>10,710원</td>
                <td>-</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>삼성전자 (005930)</td>
                <td class="trade-sell">매도</td>
                <td>100주</td>
                <td>72,114원</td>
                <td>7,211,400원</td>
                <td>10,817원</td>
                <td class="profit">+49,873원</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>SK하이닉스 (000660)</td>
                <td class="trade-buy">매수</td>
                <td>30주</td>
                <td>251,000원</td>
                <td>7,530,000원</td>
                <td>11,295원</td>
                <td>-</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>SK하이닉스 (000660)</td>
                <td class="trade-sell">매도</td>
                <td>30주</td>
                <td>254,012원</td>
                <td>7,620,360원</td>
                <td>11,431원</td>
                <td class="profit">+67,634원</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>LG에너지솔루션 (373220)</td>
                <td class="trade-buy">매수</td>
                <td>10주</td>
                <td>367,500원</td>
                <td>3,675,000원</td>
                <td>5,513원</td>
                <td>-</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>LG에너지솔루션 (373220)</td>
                <td class="trade-sell">매도</td>
                <td>10주</td>
                <td>375,585원</td>
                <td>3,755,850원</td>
                <td>5,634원</td>
                <td class="profit">+69,704원</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>NAVER (035420)</td>
                <td class="trade-buy">매수</td>
                <td>10주</td>
                <td>222,000원</td>
                <td>2,220,000원</td>
                <td>3,330원</td>
                <td>-</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>NAVER (035420)</td>
                <td class="trade-sell">매도</td>
                <td>10주</td>
                <td>223,332원</td>
                <td>2,233,320원</td>
                <td>3,350원</td>
                <td class="profit">+6,640원</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>현대차 (005380)</td>
                <td class="trade-buy">매수</td>
                <td>10주</td>
                <td>220,000원</td>
                <td>2,200,000원</td>
                <td>3,300원</td>
                <td>-</td>
            </tr>
            <tr>
                <td>05:53:22</td>
                <td>현대차 (005380)</td>
                <td class="trade-sell">매도</td>
                <td>10주</td>
                <td>221,100원</td>
                <td>2,211,000원</td>
                <td>3,316원</td>
                <td class="profit">+4,384원</td>
            </tr>
        </tbody>
    </table>
</div>

<style>
.advanced-charts {
    margin: 30px 0;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
}

.period-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.tab-button {
    padding: 8px 20px;
    border: 1px solid #ddd;
    background: white;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.tab-button.active {
    background: #007bff;
    color: white;
    border-color: #007bff;
}

.chart-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 30px;
}

.chart-box {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.chart-box h4 {
    margin: 0 0 10px 0;
    color: #333;
}

.chart-stats {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    font-size: 12px;
    color: #666;
}

.performance-metrics {
    background: white;
    padding: 20px;
    border-radius: 8px;
}

.metrics-table {
    width: 100%;
    border-collapse: collapse;
}

.metrics-table td {
    padding: 10px;
    border-bottom: 1px solid #eee;
}

.metrics-table td:nth-child(even) {
    text-align: right;
    font-weight: bold;
}
</style>


    <script>
    
    // 실제 삼성전자 5분봉 데이터
    window.samsung_5min_data = [
  {
    "time": "15:01",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 3685
  },
  {
    "time": "15:02",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 4385
  },
  {
    "time": "15:03",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 7306
  },
  {
    "time": "15:04",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 7843
  },
  {
    "time": "15:05",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 10567
  },
  {
    "time": "15:06",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 7337
  },
  {
    "time": "15:07",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 8743
  },
  {
    "time": "15:08",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 8299
  },
  {
    "time": "15:09",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 24183
  },
  {
    "time": "15:10",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 9965
  },
  {
    "time": "15:11",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 26487
  },
  {
    "time": "15:12",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 27352
  },
  {
    "time": "15:13",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 8235
  },
  {
    "time": "15:14",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 21525
  },
  {
    "time": "15:15",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 10831
  },
  {
    "time": "15:16",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 37195
  },
  {
    "time": "15:17",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 14569
  },
  {
    "time": "15:18",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 38353
  },
  {
    "time": "15:19",
    "open": 71300.0,
    "high": 71400.0,
    "low": 71200.0,
    "close": 71400.0,
    "volume": 62369
  },
  {
    "time": "15:20",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:21",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:22",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:23",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:24",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:25",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:26",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:27",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:28",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:29",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:30",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 1316634
  }
];
    
    console.log('실제 5분봉 데이터 로드 완료:', samsung_5min_data.length, '개 구간');
    
    
    // 캔들스틱 차트 그리기
    function drawCandlestickChart(canvasId, data) {
        const canvas = document.getElementById(canvasId);
        if (!canvas || !data || data.length === 0) return;
        
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        
        ctx.clearRect(0, 0, width, height);
        
        const padding = 50;
        const chartWidth = width - padding * 2;
        const chartHeight = height - padding * 2;
        
        // 가격 범위 계산
        const prices = data.flatMap(d => [d.open, d.high, d.low, d.close]);
        const minPrice = Math.min(...prices);
        const maxPrice = Math.max(...prices);
        const priceRange = maxPrice - minPrice || 1;
        
        const candleWidth = chartWidth / data.length * 0.8;
        
        // 캔들스틱 그리기
        data.forEach((candle, i) => {
            const x = padding + (i + 0.5) * (chartWidth / data.length);
            
            const openY = padding + chartHeight - ((candle.open - minPrice) / priceRange) * chartHeight;
            const closeY = padding + chartHeight - ((candle.close - minPrice) / priceRange) * chartHeight;
            const highY = padding + chartHeight - ((candle.high - minPrice) / priceRange) * chartHeight;
            const lowY = padding + chartHeight - ((candle.low - minPrice) / priceRange) * chartHeight;
            
            // 고가-저가 선
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x, highY);
            ctx.lineTo(x, lowY);
            ctx.stroke();
            
            // 캔들 몸체
            const bodyTop = Math.min(openY, closeY);
            const bodyHeight = Math.abs(openY - closeY) || 1;
            
            if (candle.close >= candle.open) {
                // 상승 (양봉)
                ctx.fillStyle = '#e74c3c';
                ctx.strokeStyle = '#e74c3c';
            } else {
                // 하락 (음봉)
                ctx.fillStyle = '#3498db';
                ctx.strokeStyle = '#3498db';
            }
            
            ctx.fillRect(x - candleWidth/2, bodyTop, candleWidth, bodyHeight);
            ctx.strokeRect(x - candleWidth/2, bodyTop, candleWidth, bodyHeight);
            
            // 시간 레이블
            if (i % 5 === 0) {
                ctx.fillStyle = '#666';
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(candle.time, x, height - 10);
            }
        });
        
        // Y축 가격 레이블
        for (let i = 0; i <= 5; i++) {
            const price = minPrice + (priceRange * i / 5);
            const y = padding + chartHeight - (i / 5) * chartHeight;
            
            ctx.fillStyle = '#666';
            ctx.font = '10px Arial';
            ctx.textAlign = 'right';
            ctx.fillText(price.toLocaleString(), padding - 5, y + 3);
        }
        
        // 제목
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('실시간 5분봉 차트', width/2, 20);
    }
    
    // 거래량 차트 그리기
    function drawVolumeChart(canvasId, data) {
        const canvas = document.getElementById(canvasId);
        if (!canvas || !data || data.length === 0) return;
        
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        
        ctx.clearRect(0, 0, width, height);
        
        const padding = 50;
        const chartWidth = width - padding * 2;
        const chartHeight = height - padding * 2;
        
        const maxVolume = Math.max(...data.map(d => d.volume));
        const barWidth = chartWidth / data.length * 0.8;
        
        data.forEach((candle, i) => {
            const x = padding + (i + 0.5) * (chartWidth / data.length);
            const barHeight = (candle.volume / maxVolume) * chartHeight;
            const y = padding + chartHeight - barHeight;
            
            ctx.fillStyle = candle.volume > 0 ? '#2ecc71' : '#95a5a6';
            ctx.fillRect(x - barWidth/2, y, barWidth, barHeight);
            
            // 시간 레이블
            if (i % 5 === 0) {
                ctx.fillStyle = '#666';
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(candle.time, x, height - 10);
            }
        });
        
        // Y축 거래량 레이블
        for (let i = 0; i <= 3; i++) {
            const volume = (maxVolume * i / 3);
            const y = padding + chartHeight - (i / 3) * chartHeight;
            
            ctx.fillStyle = '#666';
            ctx.font = '10px Arial';
            ctx.textAlign = 'right';
            const volumeText = volume > 1000000 ? (volume/1000000).toFixed(1) + 'M' : 
                             volume > 1000 ? (volume/1000).toFixed(0) + 'K' : volume.toFixed(0);
            ctx.fillText(volumeText, padding - 5, y + 3);
        }
        
        // 제목
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('거래량', width/2, 20);
    }
    
    // 차트 초기화
    setTimeout(() => {
        // 삼성전자 5분봉 차트 (Enhanced Version)
        if (window.samsung_5min_data) {
            initializeEnhancedCharts(samsung_5min_data);
        }
        
        // 과거 데이터 차트는 기존 코드 유지
        drawHistoricalCharts('30');
    }, 100);
    </script>
    
        
        
        <h3>거래 내역</h3>
        <table class="trades-table">
            <thead>
                <tr>
                    <th>시간</th>
                    <th>종목</th>
                    <th>매매</th>
                    <th>수량</th>
                    <th>가격</th>
                    <th>손익</th>
                    <th>알고리즘</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>05:53:22</td><td>005930</td><td>BUY</td><td>100</td><td>71,400</td><td class="positive">0</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>005930</td><td>SELL</td><td>100</td><td>72,114</td><td class="positive">49,873</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>000660</td><td>BUY</td><td>30</td><td>251,000</td><td class="positive">0</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>000660</td><td>SELL</td><td>30</td><td>254,012</td><td class="positive">67,634</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>373220</td><td>BUY</td><td>10</td><td>367,500</td><td class="positive">0</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>373220</td><td>SELL</td><td>10</td><td>375,585</td><td class="positive">69,704</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>035420</td><td>BUY</td><td>10</td><td>222,000</td><td class="positive">0</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>035420</td><td>SELL</td><td>10</td><td>223,332</td><td class="positive">6,640</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>005380</td><td>BUY</td><td>10</td><td>220,000</td><td class="positive">0</td><td>Real_Market_Algorithm</td></tr><tr><td>05:53:22</td><td>005380</td><td>SELL</td><td>10</td><td>221,100</td><td class="positive">4,383</td><td>Real_Market_Algorithm</td></tr>
            </tbody>
        </table>
    </div>
    
    
    <script>
    
    // 실제 삼성전자 5분봉 데이터
    window.samsung_5min_data = [
  {
    "time": "15:01",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 3685
  },
  {
    "time": "15:02",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 4385
  },
  {
    "time": "15:03",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 7306
  },
  {
    "time": "15:04",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 7843
  },
  {
    "time": "15:05",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 10567
  },
  {
    "time": "15:06",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 7337
  },
  {
    "time": "15:07",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 8743
  },
  {
    "time": "15:08",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 8299
  },
  {
    "time": "15:09",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 24183
  },
  {
    "time": "15:10",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 9965
  },
  {
    "time": "15:11",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 26487
  },
  {
    "time": "15:12",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 27352
  },
  {
    "time": "15:13",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 8235
  },
  {
    "time": "15:14",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 21525
  },
  {
    "time": "15:15",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 10831
  },
  {
    "time": "15:16",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71200.0,
    "volume": 37195
  },
  {
    "time": "15:17",
    "open": 71200.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 14569
  },
  {
    "time": "15:18",
    "open": 71300.0,
    "high": 71300.0,
    "low": 71200.0,
    "close": 71300.0,
    "volume": 38353
  },
  {
    "time": "15:19",
    "open": 71300.0,
    "high": 71400.0,
    "low": 71200.0,
    "close": 71400.0,
    "volume": 62369
  },
  {
    "time": "15:20",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:21",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:22",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:23",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:24",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:25",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:26",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:27",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:28",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:29",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 0
  },
  {
    "time": "15:30",
    "open": 71400.0,
    "high": 71400.0,
    "low": 71400.0,
    "close": 71400.0,
    "volume": 1316634
  }
];
    
    console.log('실제 5분봉 데이터 로드 완료:', samsung_5min_data.length, '개 구간');
    
    
    // 캔들스틱 차트 그리기
    function drawCandlestickChart(canvasId, data) {
        const canvas = document.getElementById(canvasId);
        if (!canvas || !data || data.length === 0) return;
        
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        
        ctx.clearRect(0, 0, width, height);
        
        const padding = 50;
        const chartWidth = width - padding * 2;
        const chartHeight = height - padding * 2;
        
        // 가격 범위 계산
        const prices = data.flatMap(d => [d.open, d.high, d.low, d.close]);
        const minPrice = Math.min(...prices);
        const maxPrice = Math.max(...prices);
        const priceRange = maxPrice - minPrice || 1;
        
        const candleWidth = chartWidth / data.length * 0.8;
        
        // 캔들스틱 그리기
        data.forEach((candle, i) => {
            const x = padding + (i + 0.5) * (chartWidth / data.length);
            
            const openY = padding + chartHeight - ((candle.open - minPrice) / priceRange) * chartHeight;
            const closeY = padding + chartHeight - ((candle.close - minPrice) / priceRange) * chartHeight;
            const highY = padding + chartHeight - ((candle.high - minPrice) / priceRange) * chartHeight;
            const lowY = padding + chartHeight - ((candle.low - minPrice) / priceRange) * chartHeight;
            
            // 고가-저가 선
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x, highY);
            ctx.lineTo(x, lowY);
            ctx.stroke();
            
            // 캔들 몸체
            const bodyTop = Math.min(openY, closeY);
            const bodyHeight = Math.abs(openY - closeY) || 1;
            
            if (candle.close >= candle.open) {
                // 상승 (양봉)
                ctx.fillStyle = '#e74c3c';
                ctx.strokeStyle = '#e74c3c';
            } else {
                // 하락 (음봉)
                ctx.fillStyle = '#3498db';
                ctx.strokeStyle = '#3498db';
            }
            
            ctx.fillRect(x - candleWidth/2, bodyTop, candleWidth, bodyHeight);
            ctx.strokeRect(x - candleWidth/2, bodyTop, candleWidth, bodyHeight);
            
            // 시간 레이블
            if (i % 5 === 0) {
                ctx.fillStyle = '#666';
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(candle.time, x, height - 10);
            }
        });
        
        // Y축 가격 레이블
        for (let i = 0; i <= 5; i++) {
            const price = minPrice + (priceRange * i / 5);
            const y = padding + chartHeight - (i / 5) * chartHeight;
            
            ctx.fillStyle = '#666';
            ctx.font = '10px Arial';
            ctx.textAlign = 'right';
            ctx.fillText(price.toLocaleString(), padding - 5, y + 3);
        }
        
        // 제목
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('실시간 5분봉 차트', width/2, 20);
    }
    
    // 거래량 차트 그리기
    function drawVolumeChart(canvasId, data) {
        const canvas = document.getElementById(canvasId);
        if (!canvas || !data || data.length === 0) return;
        
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;
        
        ctx.clearRect(0, 0, width, height);
        
        const padding = 50;
        const chartWidth = width - padding * 2;
        const chartHeight = height - padding * 2;
        
        const maxVolume = Math.max(...data.map(d => d.volume));
        const barWidth = chartWidth / data.length * 0.8;
        
        data.forEach((candle, i) => {
            const x = padding + (i + 0.5) * (chartWidth / data.length);
            const barHeight = (candle.volume / maxVolume) * chartHeight;
            const y = padding + chartHeight - barHeight;
            
            ctx.fillStyle = candle.volume > 0 ? '#2ecc71' : '#95a5a6';
            ctx.fillRect(x - barWidth/2, y, barWidth, barHeight);
            
            // 시간 레이블
            if (i % 5 === 0) {
                ctx.fillStyle = '#666';
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(candle.time, x, height - 10);
            }
        });
        
        // Y축 거래량 레이블
        for (let i = 0; i <= 3; i++) {
            const volume = (maxVolume * i / 3);
            const y = padding + chartHeight - (i / 3) * chartHeight;
            
            ctx.fillStyle = '#666';
            ctx.font = '10px Arial';
            ctx.textAlign = 'right';
            const volumeText = volume > 1000000 ? (volume/1000000).toFixed(1) + 'M' : 
                             volume > 1000 ? (volume/1000).toFixed(0) + 'K' : volume.toFixed(0);
            ctx.fillText(volumeText, padding - 5, y + 3);
        }
        
        // 제목
        ctx.fillStyle = '#333';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('거래량', width/2, 20);
    }
    
    // 차트 초기화
    setTimeout(() => {
        // 삼성전자 5분봉 차트 (Enhanced Version)
        if (window.samsung_5min_data) {
            initializeEnhancedCharts(samsung_5min_data);
        }
        
        // 과거 데이터 차트는 기존 코드 유지
        drawHistoricalCharts('30');
    }, 100);
    </script>
    
</body>
</html>
        