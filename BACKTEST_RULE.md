# 🎯 BACKTEST 영구 규칙 - tideWise

## 📋 필수 지침 (MANDATORY RULES)

### ⚠️ 절대 규칙 - 영구기억에 저장

1. **Algorithm 폴더의 모든 알고리즘 백테스팅 필수**
   - 요청시 Algorithm 폴더 내 모든 .py 알고리즘 파일을 백테스팅
   - 현재 6개 알고리즘: SafeSimpleAlgorithm, EnhancedDataTradingAlgorithm, OptimizedHybridAlgorithm, K-ShotTradingAlgo, EnhancedRSIMeanReversion, VolumePriceAnalysisAlgorithm

2. **백테스팅 결과 필수 저장 경로**
   ```
   tideWise\backtest_results\
   ├── [알고리즘명]_[YYYYMMDD_HHMMSS].json  ← 필수
   ├── [알고리즘명]_[YYYYMMDD_HHMMSS].html  ← 필수
   └── summary_[YYYYMMDD_HHMMSS].json       ← 전체요약 필수
   └── summary_[YYYYMMDD_HHMMSS].html       ← 전체요약 필수
   ```

3. **백테스팅 결과 파일 형식**
   - **JSON**: 구조화된 데이터 (수익률, 승률, 거래내역 등)
   - **HTML**: 시각적 보고서 (차트, 표, 분석 포함)
   - **요약파일**: 모든 알고리즘 성능 비교

## 🚀 실행 명령어

### 자동 백테스팅 실행
```bash
python backtest_all_algorithms.py
```

### 백테스팅 시스템 특징
- **실시간 진행상황 표시**: [TESTING] [SAVED] [SUMMARY] 표시
- **에러 처리**: 개별 알고리즘 오류시에도 계속 진행
- **성과 지표**: 수익률, 승률, 샤프비율, 최대낙폭 계산
- **HTML 시각화**: 차트와 표를 포함한 전문적 보고서

## 📊 백테스팅 성과 지표

### 필수 성과 지표
1. **총 수익률 (%)**: (최종자본 - 초기자본) / 초기자본 × 100
2. **승률 (%)**: 수익거래 / 총거래 × 100
3. **거래 횟수**: 매수 신호 발생 횟수
4. **샤프 비율**: 위험 대비 수익률 지표
5. **최대 낙폭 (%)**: 최고점 대비 최대 하락폭

### 백테스팅 조건
- **초기 자본**: 1,000만원
- **테스트 기간**: 1년 (252 거래일)
- **투자 비율**: 포지션당 95% 투자
- **수수료**: 고려하지 않음 (순수 알고리즘 성능)

## 🎨 HTML 보고서 특징

### 개별 알고리즘 HTML
- **헤더**: 알고리즘명, 테스트기간
- **성과 카드**: 7개 주요 지표 시각화
- **거래 내역**: 최근 10개 거래 표
- **색상 코딩**: 수익(녹색), 손실(빨강), 중립(회색)

### 전체 요약 HTML
- **비교 테이블**: 모든 알고리즘 성능 비교
- **순위**: 수익률 기준 정렬
- **링크**: 개별 보고서 바로가기
- **최고/최저**: 성과 강조 표시

## 🔄 자동화 규칙

### 백테스팅 자동 실행 조건
1. 사용자가 "백테스팅" 요청시
2. "Algorithm" 폴더 언급시
3. "성과 확인" 요청시
4. "모든 알고리즘" 언급시

### 저장 규칙
- **파일명**: 알고리즘명_타임스탬프 형식
- **인코딩**: UTF-8 (한글 지원)
- **폴더**: backtest_results 자동 생성
- **덮어쓰기**: 타임스탬프로 구분, 보존

## 💡 주의사항

1. **Pine Script 파일**: Python으로 변환하여 백테스팅
2. **오류 처리**: 개별 알고리즘 오류시에도 전체 진행
3. **성능 최적화**: 병렬 처리 미사용 (순차 실행)
4. **메모리 관리**: 대용량 데이터 처리 고려

---

**마지막 업데이트**: 2025-08-07 21:10:27
**적용 상태**: ✅ 활성화
**준수 필수**: 🚨 절대 준수